version: 2

sources:
  - name: zoomcamp
    database: "{{ var('dbt_premierleague')['gcp_project_id'] }}"
    schema: "{{ var('dbt_premierleague')['schema'] }}"    #bigquery dataset source
    tables:
      - name: premierleague_dataset     #bigquery dataset table
        description: "english premier league match statistics"

models:
  - name: stg_home
    description: "Courses enrolled in that particular month."
    columns:
      - name: season
        data_type: string
        description: "The year and month of the courses extraction. Example: 2025-03."
        tests:
          - not_null:
              severity: warn

      - name: date
        data_type: date
        description: "Dataset upload date. Example: 2025-03-19."
        tests:
          - not_null:
              severity: warn

      - name: team
        data_type: string
        description: "company providing the course. Example: AFTRAL."

      - name: side
        data_type: string
        description: "Certification Title. Example: Certificate of aptitude for safe driving (CACES) Recommendation 482 category B1: Sequential movement extraction equipment."

      - name: goals_scored
        data_type: int64
        description: "Certification code corresponding to certification_title. Example: 106655."

      - name: goals_conceded
        data_type: int64
        description: "National Directory of Professional Certifications Code. Example: -1 (Because it has code_rs)."

      - name: result
        data_type: string
        description: "Certifications listed in the RS inventory. Example: 7041."

  - name: stg_away
    description: "Courses enrolled in that particular month."
    columns:
      - name: season
        data_type: string
        description: "The year and month of the courses extraction. Example: 2025-03."
        tests:
          - not_null:
              severity: warn

      - name: date
        data_type: date
        description: "Dataset upload date. Example: 2025-03-19."
        tests:
          - not_null:
              severity: warn

      - name: team
        data_type: string
        description: "company providing the course. Example: AFTRAL."

      - name: side
        data_type: string
        description: "Certification Title. Example: Certificate of aptitude for safe driving (CACES) Recommendation 482 category B1: Sequential movement extraction equipment."

      - name: goals_scored
        data_type: int64
        description: "Certification code corresponding to certification_title. Example: 106655."

      - name: goals_conceded
        data_type: int64
        description: "National Directory of Professional Certifications Code. Example: -1 (Because it has code_rs)."

      - name: result
        data_type: string
        description: "Certifications listed in the RS inventory. Example: 7041."


  - name: fct_goals_scored
    description: "Enrollments fact table having total number of enrollments, providers and certifications in a given month for a particular formacode along with the description of formacode and the field it belongs to."
    columns:
      - name: season
        data_type: date
        description: "year_month of entry or exit. Example: 2024-11."

      - name: team
        data_type: int64
        description: "It represents the 5 most relevant Formacode codes for each training course. It is like a search word or a classification system to categorise training programs by skills it aims at. Example: 31025 - Data Analytics, 31026 - Data Scienc."

      - name: total_goals_scored
        data_type: int64
        description: "Total no. of trianings listed in that month for a particular formacode."

  - name: fct_goals_conceded
    description: "Enrollments fact table having total number of enrollments, providers and certifications in a given month for a particular formacode along with the description of formacode and the field it belongs to."
    columns:
      - name: season
        data_type: date
        description: "year_month of entry or exit. Example: 2024-11."

      - name: team
        data_type: int64
        description: "It represents the 5 most relevant Formacode codes for each training course. It is like a search word or a classification system to categorise training programs by skills it aims at. Example: 31025 - Data Analytics, 31026 - Data Scienc."

      - name: total_goals_conceded
        data_type: int64
        description: "Total no. of trianings listed in that month for a particular formacode."

  - name: fct_ranking
    description: "ranking"
    columns:
      - name: season
        data_type: string
        description: "The year and month of the courses extraction. Example: 2025-03."

      - name: team
        data_type: string
        description: "company providing the course. Example: AFTRAL."

      - name: points
        data_type: int64
        description: "Certification Title. Example: Certificate of aptitude for safe driving (CACES) Recommendation 482 category B1: Sequential movement extraction equipment."

      - name: goals_scored
        data_type: int64
        description: "Certification code corresponding to certification_title. Example: 106655."

      - name: goals_conceded
        data_type: int64
        description: "National Directory of Professional Certifications Code. Example: -1 (Because it has code_rs)."

      - name: goals_difference
        data_type: int64
        description: "National Directory of Professional Certifications Code. Example: -1 (Because it has code_rs)."
    